run_name: "dmd_1train_5test"  

paths:
  output_base: "/Users/anthonypoole/Repositories/IEEE/local_output"
  
  data_dir: "/Users/anthonypoole/Repositories/IEEE/data/hw2d"
  
  training_files: 
      - hw2d_sim_step0.025_end1_pts512_c11_k015_N3_nu5e-8_20250315142044_11702_0.h5     

  test_files:
      - hw2d_sim_step0.025_end1_pts512_c11_k015_N3_nu5e-8_20250315171533_30878_0.h5
      - hw2d_sim_step0.025_end1_pts512_c11_k015_N3_nu5e-8_20250315142045_4677_2.h5      
      - hw2d_sim_step0.025_end1_pts512_c11_k015_N3_nu5e-8_20250315221115_13688_1.h5
      - hw2d_sim_step0.025_end1_pts512_c11_k015_N3_nu5e-8_20250315142047_27930_0.h5     
      - hw2d_sim_step0.025_end1_pts512_c11_k015_N3_nu5e-8_20250315230232_31225_0.h5

physics:
  dt: 0.025                     # Simulation time step
  n_fields: 2                   # Number of fields (density, phi)
  n_x: 256                      # Grid points in x
  n_y: 256                      # Grid points in y

pod:
  r: 21                         # Determined by 99.99% energy criterion 
  svd_save: 250                 # Number of singular values to save

# DMD-specific settings
dmd:
  rank: null                    # DMD rank (null = use same as POD r)
  num_trials: 0                 # Number of bagging trials (0 = no bagging, standard BOPDMD)
  use_proj: true                # Use POD projection in BOPDMD
  eig_sort: "real"              # Eigenvalue sorting: "real", "imag", "abs"
  learn_output_operator: true   # Learn linear output operator for Gamma prediction
  output_reg: 1.0e-6            # Regularization for output operator learning
  
truncation:
  enabled: true                 # Enable/disable truncation
  method: "time"                # "snapshots" or "time"
  snapshots: null               # Number of snapshots to keep (if method="snapshots")
  time: 200.0                   # Simulation time to keep (if method="time")

# Training settings (used for learning output operator)
training:
  training_end: 8000            # Index marking end of training region
  n_steps: 8000                 # Number of time steps for integration

# These are not used for DMD but kept for compatibility with shared Step 1
regularization:
  state_lin:
    min: 1.0e-2
    max: 1.0e6
    num: 1
    scale: "linear"
  state_quad:
    min: 1.0e7
    max: 1.0e15
    num: 1
    scale: "linear"
  output_lin:
    min: 1.0e-8
    max: 1.0e1
    num: 1
    scale: "linear"
  output_quad:
    min: 1.0e-10
    max: 1.0e1
    num: 1
    scale: "linear"

model_selection:
  method: "top_k"               # Not used for DMD
  num_top_models: 1
  threshold_mean: 0.08
  threshold_std: 0.5

evaluation:
  compute_full_state: false     # Reconstruct full-order state (memory intensive)
  save_predictions: true        # Save ensemble predictions
  generate_plots: true          # Generate diagnostic plots

execution:
  verbose: true                 # Print progress information
  log_level: "INFO"             # Logging level: DEBUG, INFO, WARNING, ERROR
  engine: "h5netcdf"            # HDF5 engine for xarray
